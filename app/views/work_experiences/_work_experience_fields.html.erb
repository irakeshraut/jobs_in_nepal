<div class='nested-fields'>
  <div class='row work_experiences'>
    <div class='col-md-6 col-sm-6'>
      <div class="form-group">
        <%= hidden_field_tag :redirect_to, :edit_work_experience_path %>
        <%= f.label :job_tile, 'Job Title'  %>
        <div class="input-with-icon">
          <%= f.text_field :job_title, placeholder: 'Enter Job Title', class: 'form-control', required: true %>
          <i class="theme-cl ti-pencil"></i>
        </div>
      </div>
    </div>
    <div class='col-md-6 col-sm-6'>
      <div class="form-group">
        <%= f.label :company_name, 'Company Name'  %>
        <div class="input-with-icon">
          <%= f.text_field :company_name, placeholder: 'Enter Company Name', class: 'form-control', required: true %>
          <i class="theme-cl ti-home"></i>
        </div>
      </div>
    </div>
  </div>
  <div class='row'>
    <div class='col-md-6 col-sm-6'>
      <div class="form-group">
        <%= f.label :started, 'Start Month' %>
        <div class="input-with-icon">
          <%= f.select :start_month, WorkExperiencesHelper.months, { prompt: '-- Select --' }, class: 'form-control', required: true %>
          <i class="theme-cl ti-calendar"></i>
        </div>
      </div>
    </div>
    <div class='col-md-6 col-sm-6'>
      <div class="form-group">
        <%= f.label :started, 'Start Year' %>
        <div class="input-with-icon">
          <%= f.select :start_year, WorkExperiencesHelper.years, { prompt: '-- Select --' }, class: 'form-control', required: true %>
          <i class="theme-cl ti-calendar"></i>
        </div>
      </div>
    </div>
  </div>
  <div class='row finished'>
    <div class='col-md-6 col-sm-6'>
      <div class="form-group">
        <%= f.label :finished, 'Finished Month' %>
        <div class="input-with-icon">
          <%= f.select :finish_month, WorkExperiencesHelper.months, { prompt: '-- Select --' }, class: 'form-control' %>
          <i class="theme-cl ti-calendar"></i>
        </div>
      </div>
    </div>
    <div class='col-md-6 col-sm-6'>
      <div class="form-group">
        <%= f.label :finished, 'Finished Year' %>
        <div class="input-with-icon">
          <%= f.select :finish_year, WorkExperiencesHelper.years, { prompt: '-- Select --' }, class: 'form-control' %>
          <i class="theme-cl ti-calendar"></i>
        </div>
      </div>
    </div>
  </div>
  <div class='row'>
    <div class='col-md-6 col-sm-6'>
      <div class="form-group">
        <%= f.label :still_in_role %>
        <%= f.check_box :still_in_role, class: 'still-in-role' %>
      </div>
    </div>
  </div>
  <div class='row'>
    <div class='col-md-12 col-sm-12'>
      <div class="form-group">
        <%= f.label :description, 'Description (recommended)' %>
        <%= f.rich_text_area :description, placeholder: 'Summarise your responsibilities, skills and achievements.', class: 'form-control customized-min-height'  %>
      </div>
    </div>
  </div>
  <%= link_to_remove_association  f, class: 'btn btn-danger' do %>
    <i class="fa fa-trash"></i> Delete
  <% end %>
</div>

<script>
  $(document).ready(function() {
    $('.still-in-role').each(function() {
      if(this.checked) {
        $(this).closest('.row').prev('.finished').hide();
       } else {
        $(this).closest('.row').prev('.finished').show();
       }
    });

    $('.still-in-role').change(function() {
      if(this.checked) {
        $(this).closest('.row').prev('.finished').hide();
        $('select:hidden').removeAttr('required');
      } else {
        $(this).closest('.row').prev('.finished').show();
        $('select:visible').attr('required', true);
      }
    })
  });
</script>
